---
title: 设备管理概述
---



# I/O设备

## 定义

- > 将数据Input/Output计算机的外部设备

## 分类

### 按使用特性分类

- 人机交互类外部设备
- 存储设备
- 网络通信设备

### 按传输速率分类

- 低速设备
- 中速设备
- 高速设备

### 按信息交换的单位分类

- 块设备：传输快，可寻址
- 字符设备：传输慢，不可寻址，常采用中断驱动方式

### 按设备的共享属性分类

- 独占设备：同一时刻只能有一个进程占用的设备
- 共享设备：同一时间段允许多个进程同时访问的设备
- 虚拟设备：通过SPOOLing技术将独占设备改造为共享设备，将一个物理设备变为多个逻辑设备，从而可将设备同时分配给多个进程

## I/O接口（设备控制器）

### 主要功能

- 接受和识别CPU发出的命令：==控制寄存器==
- 向CPU报告设备的状态：==状态寄存器==
- 数据交换：==数据寄存器==
- 地址识别

### 组成

- CPU与控制器之间的接口（实现控制器与CPU之间的通信）
- I/O逻辑（负责识别CPU发出的命令，并向设备发出命令）
- 控制器与设备之间的接口（实现控制器与设备之间的通信）

## I/O接口的类型

### 按数据传送方式

- 并行接口
- 串行接口

### 按主机访问I/O设备的控制方式

- 程序查询接口
- 中断
- DMA接口
- 等等

### 按功能选择的灵活性

- 可编程接口：通过编程改变接口功能
- 不可编程接口

## I/O端口：设备控制器中可被CPU直接访问的寄存器

- 数据寄存器
- 状态寄存器
- 控制寄存器
- 两种寄存器编址方式
  - 内存映射I/O
    - 控制器中的寄存器与内存统一编址
    - 可以采用对内存进行操作的指令来对控制器进行操作

  - 寄存器独立编址
    - 控制器中的寄存器独立编址
    - 需要设置专门的指令来操作控制器

# I/O控制方式

- |                                                       | 完成一次读/写的过程                                          | CPU干预频率 | 每次I/O的数据传输单位 | 数据流向                                 | 优缺点                                                       |
  | ----------------------------------------------------- | ------------------------------------------------------------ | ----------- | --------------------- | ---------------------------------------- | ------------------------------------------------------------ |
  | 程序直接控制方式                                      | CPU发出I/O命令后需要不断轮询                                 | 极高        | 字节                  | - 设备->CPU->内存<br />- 内存->CPU->设备 | 每个阶段的优点都是解决上一个阶段的最大缺点                   |
  | 中断驱动方式                                          | CPU发出I/O命令后可以做其他事，本次I/O完成后设备控制器发出中断信号 | 高          | 字节                  | - 设备->CPU->内存<br />- 内存->CPU->设备 | 总体来说，整个发展过程就是要尽量减少CPU对I/O过程的干预       |
  | DMA方式                                               | CPU发出I/O命令后可以做其他事，本次I/O完成后DMA控制器发出中断信号 | 中          | 块                    | - 设备->内存<br />- 内存->设备           | 把CPU从繁杂的I/O控制事务中解脱出来，以便更多的去完成数据处理任务 |
  | 通道控制方式（通道：一种硬件，可以理解为“弱鸡版CPU”） | CPU发出I/O命令后可以做其他事。通道会执行通道程序以完成I/O，完成后通道发出中断信号 | 低          | 一组块                | - 设备->内存<br />- 内存->设备           |                                                              |

  - DMA方式中DMA硬件会占用数据总线和地址总线。所以实际上节省时间的核心是在于，软件实现的数据传输功能改为DMA硬件电路实现。这种硬件加速提高了效率

# I/O软件层次结构

- |层次结构|
  | --- |
  |用户层软件|
  |设备独立性软件|
  |设备驱动程序|
  |中断处理程序|
  |硬件|